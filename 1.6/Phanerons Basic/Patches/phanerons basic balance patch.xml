<?xml version="1.0" encoding="utf-8" ?>
<Patch>
<!-- REBALANCE -->
    <!-- Sack -->
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="BasicStorageSack"]/building/maxItemsInCell</xpath>
        <value>
            <maxItemsInCell>3</maxItemsInCell>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/AdaptiveStorage.GraphicsDef[@ParentName="BasicStorageSackBase"]/graphics/li[minimumStackCount="5"]/minimumStackCount</xpath>
        <value>
            <minimumStackCount>3</minimumStackCount>
        </value>
    </Operation>
    <!-- Large Bundle -->
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="BasicStorageLargeBundle"]/building/maxItemsInCell</xpath>
        <value>
            <maxItemsInCell>4</maxItemsInCell>
        </value>
    </Operation>
    <!-- Cargo Container -->
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="BasicStorageCargoContainer"]/building/maxItemsInCell</xpath>
        <value>
            <maxItemsInCell>6</maxItemsInCell>
        </value>
    </Operation>
    <!-- Cask -->
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="BasicStorageCask"]/building/maxItemsInCell</xpath>
        <value>
            <maxItemsInCell>6</maxItemsInCell>
        </value>
    </Operation>
    <!-- Small Crate -->
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="BasicStorageWoodenCrate"]/building/maxItemsInCell</xpath>
        <value>
            <maxItemsInCell>4</maxItemsInCell>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/AdaptiveStorage.GraphicsDef[@ParentName="BasicStorageWoodenCrateBase"]/graphics/li[minimumStackCount="4"]/minimumStackCount</xpath>
        <value>
            <minimumStackCount>3</minimumStackCount>
        </value>
    </Operation>
    <!-- Medium Crate -->
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="BasicStorageMediumCrate"]/building/maxItemsInCell</xpath>
        <value>
            <maxItemsInCell>4</maxItemsInCell>
        </value>
    </Operation>
    <!-- Large Crate -->
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="BasicStorageLargeCrate"]/building/maxItemsInCell</xpath>
        <value>
            <maxItemsInCell>4</maxItemsInCell>
        </value>
    </Operation>
    <!-- Food Barrel -->
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="BasicStorageFoodBarrel"]/building/maxItemsInCell</xpath>
        <value>
            <maxItemsInCell>6</maxItemsInCell>
        </value>
    </Operation>
    <!-- Pantry Shelf -->
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="BasicStorageFoodCupboard"]/building/maxItemsInCell</xpath>
        <value>
            <maxItemsInCell>6</maxItemsInCell>
        </value>
    </Operation>
    <!-- Fuel Tank -->
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="BasicStorageFuelTank"]/building/maxItemsInCell</xpath>
        <value>
            <maxItemsInCell>10</maxItemsInCell>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="BasicStorageFuelTank"]/costStuffCount</xpath>
        <value>
            <costStuffCount>250</costStuffCount>
        </value>
    </Operation>
    <!-- Industrial Dumpster -->
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="BasicStorageIndustrialContainer"]/building/maxItemsInCell</xpath>
        <value>
            <maxItemsInCell>8</maxItemsInCell>
        </value>
    </Operation>
    <!-- Meal Cupbaord -->
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="BasicStorageMealStorage"]/building/maxItemsInCell</xpath>
        <value>
            <maxItemsInCell>6</maxItemsInCell>
        </value>
    </Operation>
    <!-- Meat Hook -->
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="BasicStorageMeatHook"]/building/maxItemsInCell</xpath>
        <value>
            <maxItemsInCell>6</maxItemsInCell>
        </value>
    </Operation>
    <!-- Metal Crate -->
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="BasicStorageMetalCrate"]/building/maxItemsInCell</xpath>
        <value>
            <maxItemsInCell>8</maxItemsInCell>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/AdaptiveStorage.GraphicsDef[@ParentName="BasicStorageMetalCrateBase"]/graphics/li[minimumStackCount="5"]/minimumStackCount
</xpath>
        <value>
            <minimumStackCount>6</minimumStackCount>
        </value>
    </Operation>
    <!-- Small Pallet -->
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="BasicStoragePalletSmall"]/building/maxItemsInCell</xpath>
        <value>
            <maxItemsInCell>6</maxItemsInCell>
        </value>
    </Operation>
    <!--
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/AdaptiveStorage.GraphicsDef[@ParentName="BasicStoragePallet1x1_Base"]/graphics/li[minimumStackCount="3"]/minimumStackCount</xpath>
        <value>
            <minimumStackCount>3</minimumStackCount>
        </value>
    </Operation>
    -->
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/AdaptiveStorage.GraphicsDef[@ParentName="BasicStoragePallet1x1_Base"]/graphics/li[minimumStackCount="5"]/minimumStackCount</xpath>
        <value>
            <minimumStackCount>6</minimumStackCount>
        </value>
    </Operation>
    <!-- Large Pallet -->
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="BasicStoragePalletLarge"]/building/maxItemsInCell</xpath>
        <value>
            <maxItemsInCell>7</maxItemsInCell>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/AdaptiveStorage.GraphicsDef[@ParentName="BasicStoragePallet2x2_Base"]/graphics/li[minimumStackCount="5"]/minimumStackCount</xpath>
        <value>
            <minimumStackCount>10</minimumStackCount>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/AdaptiveStorage.GraphicsDef[@ParentName="BasicStoragePallet2x2_Base"]/graphics/li[minimumStackCount="10"]/minimumStackCount</xpath>
        <value>
            <minimumStackCount>20</minimumStackCount>
        </value>
    </Operation>
    <!-- Stone Pot -->
    <!--
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="BasicStorageStonePot"]/building/maxItemsInCell</xpath>
        <value>
            <maxItemsInCell>3</maxItemsInCell>
        </value>
    </Operation>
    -->
    <!-- Weapon Rack -->
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="BasicStorageWeaponRack"]/building/maxItemsInCell</xpath>
        <value>
            <maxItemsInCell>8</maxItemsInCell>
        </value>
    </Operation>

<!-- FERNY ORGANIZE -->
    <Operation Class="PatchOperationConditional">
        <xpath>Defs/DesignationCategoryDef[defName="Ferny_Storage"]</xpath>
        <match Class="PatchOperationSequence">
            <operations>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageLargeBundle"]</xpath>
                    <value>
                        <designationCategory>Ferny_GeneralStorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageSack"]</xpath>
                    <value>
                        <designationCategory>Ferny_FoodStorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageCargoContainer"]</xpath>
                    <value>
                        <designationCategory>Ferny_ResourcesStorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageCask"]</xpath>
                    <value>
                        <designationCategory>Ferny_FoodStorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageFoodBarrel"]</xpath>
                    <value>
                        <designationCategory>Ferny_FoodStorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageFoodCupboard"]</xpath>
                    <value>
                        <designationCategory>Ferny_FoodStorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageFuelTank"]</xpath>
                    <value>
                        <designationCategory>Ferny_ResourcesStorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageIndustrialContainer"]</xpath>
                    <value>
                        <designationCategory>Ferny_ResourcesStorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageMealStorage"]</xpath>
                    <value>
                        <designationCategory>Ferny_FoodStorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStoragePalletSmall"]</xpath>
                    <value>
                        <designationCategory>Ferny_GeneralStorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStoragePalletLarge"]</xpath>
                    <value>
                        <designationCategory>Ferny_GeneralStorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageStonePot"]</xpath>
                    <value>
                        <designationCategory>Ferny_GeneralStorage</designationCategory>
                    </value>
                </li>
                <!-- Crates -->
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageWoodenCrate"]</xpath>
                    <value>
                        <designationCategory>Ferny_GeneralStorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageMediumCrate"]</xpath>
                    <value>
                        <designationCategory>Ferny_GeneralStorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageLargeCrate"]</xpath>
                    <value>
                        <designationCategory>Ferny_GeneralStorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageMetalCrate"]</xpath>
                    <value>
                        <designationCategory>Ferny_GeneralStorage</designationCategory>
                    </value>
                </li>
                <!-- Meat Hook -->
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageMeatHook"]</xpath>
                    <value>
                        <designationCategory>Ferny_FoodStorage</designationCategory>
                    </value>
                </li>
                <!-- Weapon Rack -->
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageWeaponRack"]</xpath>
                    <value>
                        <designationCategory>Ferny_GearStorage</designationCategory>
                    </value>
                </li>
            </operations>
        </match>
        <nomatch Class="PatchOperationSequence">
            <operations>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageSack"]</xpath>
                    <value>
                        <designationCategory>ASFstorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageCargoContainer"]</xpath>
                    <value>
                        <designationCategory>ASFstorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageCask"]</xpath>
                    <value>
                        <designationCategory>ASFstorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageFoodBarrel"]</xpath>
                    <value>
                        <designationCategory>ASFstorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageFoodCupboard"]</xpath>
                    <value>
                        <designationCategory>ASFstorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageFuelTank"]</xpath>
                    <value>
                        <designationCategory>ASFstorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageIndustrialContainer"]</xpath>
                    <value>
                        <designationCategory>ASFstorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageMealStorage"]</xpath>
                    <value>
                        <designationCategory>ASFstorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStoragePalletSmall"]</xpath>
                    <value>
                        <designationCategory>ASFstorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStoragePalletLarge"]</xpath>
                    <value>
                        <designationCategory>ASFstorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageLargeBundle"]</xpath>
                    <value>
                        <designationCategory>ASFstorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageStonePot"]</xpath>
                    <value>
                        <designationCategory>ASFstorage</designationCategory>
                    </value>
                </li>
                <!-- Crates -->
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageWoodenCrate"]</xpath>
                    <value>
                        <designationCategory>ASFstorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageMediumCrate"]</xpath>
                    <value>
                        <designationCategory>ASFstorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageLargeCrate"]</xpath>
                    <value>
                        <designationCategory>ASFstorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageMetalCrate"]</xpath>
                    <value>
                        <designationCategory>ASFstorage</designationCategory>
                    </value>
                </li>
                <!-- Meat Hook -->
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageMeatHook"]</xpath>
                    <value>
                        <designationCategory>ASFstorage</designationCategory>
                    </value>
                </li>
                <!-- Weapon Rack -->
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="BasicStorageWeaponRack"]</xpath>
                    <value>
                        <designationCategory>ASFstorage</designationCategory>
                    </value>
                </li>
            </operations>
        </nomatch>
    </Operation>

<!-- REMOVE DUPLICATES -->
<!-- Reels -->
    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>Reel's Expanded Storage</li>
        </mods>
        <match Class="PatchOperationSequence">
            <operations>
                <!-- Crates -->
                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[defName="BasicStorageWoodenCrate"]/designationCategory</xpath>
                    <value>
                        <designationCategory></designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[defName="BasicStorageMediumCrate"]/designationCategory</xpath>
                    <value>
                        <designationCategory></designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[defName="BasicStorageLargeCrate"]/designationCategory</xpath>
                    <value>
                        <designationCategory></designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[defName="BasicStorageMetalCrate"]/designationCategory</xpath>
                    <value>
                        <designationCategory></designationCategory>
                    </value>
                </li>
                <!-- Meat Hook -->
                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[defName="BasicStorageMeatHook"]/designationCategory</xpath>
                    <value>
                        <designationCategory></designationCategory>
                    </value>
                </li>
                <!-- Weapon Rack -->
                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[defName="BasicStorageWeaponRack"]/designationCategory</xpath>
                    <value>
                        <designationCategory></designationCategory>
                    </value>
                </li>
            </operations>
        </match>
    </Operation>
</Patch>