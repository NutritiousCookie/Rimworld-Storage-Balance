<?xml version="1.0" encoding="utf-8" ?>
<Patch>
<!-- REBALANCE -->
    <!-- Baskets -->
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="ASF_WovenBasket"]/building/maxItemsInCell</xpath>
        <value>
            <maxItemsInCell>1</maxItemsInCell>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="ASF_WovenBasket"]/costList/Hay</xpath>
        <value>
            <Hay>10</Hay>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="ASF_WovenBasket"]/description</xpath>
        <value>
        <description>A woven basket designed for storing various items. Items stored inside do not affect the beauty of their surroundings.\n\nTotal Capacity: 1 Stack\n\nRotate to change appearance.</description>
        <fillPercent>0.15</fillPercent>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="ASF_WovenBasketDouble"]/building/maxItemsInCell</xpath>
        <value>
            <maxItemsInCell>2</maxItemsInCell>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="ASF_WovenBasketDouble"]/costList/Hay</xpath>
        <value>
            <Hay>20</Hay>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="ASF_WovenBasketDouble"]/description</xpath>
        <value>
        <description>A stack of two woven baskets designed for storing various items. Items stored inside do not affect the beauty of their surroundings.\n\nTotal Capacity: 2 Stacks</description>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="ASF_WovenBasketTriple"]/building/maxItemsInCell</xpath>
        <value>
            <maxItemsInCell>3</maxItemsInCell>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="ASF_WovenBasketTriple"]/costList/Hay</xpath>
        <value>
            <Hay>30</Hay>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="ASF_WovenBasketTriple"]/description</xpath>
        <value>
        <description>A stack of two woven baskets designed for storing various items. Items stored inside do not affect the beauty of their surroundings.\n\nTotal Capacity: 3 Stacks</description>
        </value>
    </Operation>
    <!-- Wood Pile -->
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="ASF_SmallLogPile"]/building/maxItemsInCell</xpath>
        <value>
            <maxItemsInCell>4</maxItemsInCell>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="ASF_SmallLogPile"]/description</xpath>
        <value>
        <description>A designated spot to pile wood. Free to build. Deconstructing returns 100% of wood logs stored. Items stored inside will never deteriorate and don't affect the beauty of their surroundings. \n\nTotal Capacity: 4 Stacks\n\nDynamic Textures</description>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/AdaptiveStorage.GraphicsDef[defName="SmallLogPileGraphics"]/graphics/li[graphicData/texPath="SmallLogPile/SmallLogPile_F"]/minimumStackCount</xpath>
        <value>
            <minimumStackCount>4</minimumStackCount>
        </value>
    </Operation>
    <!-- Cellars -->
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="ASF_StoragePit"]/building/maxItemsInCell</xpath>
        <value>
            <maxItemsInCell>6</maxItemsInCell>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="ASF_StoragePit"]/description</xpath>
        <value>
        <description>A dirt dugout that can store a range of items. Keeps perishable items slightly cooler underground, effective at around 65F/18C. Items stored inside will never deteriorate and don't affect the beauty of their surroundings. \nOccupies a 1x1 area underground.\n\nTotal Capacity: 6 Stacks</description>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="ASF_CellarWood"]/building/maxItemsInCell</xpath>
        <value>
            <maxItemsInCell>9</maxItemsInCell>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="ASF_CellarWood"]/costStuffCount</xpath>
        <value>
            <costStuffCount>100</costStuffCount>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="ASF_CellarWood"]/description</xpath>
        <value>
            <description>A wooden cellar that can store a range of items. Keeps perishable items slightly cooler underground, effective at around 65F/18C. Items stored inside will never deteriorate and don't affect the beauty of their surroundings. \nOccupies a 3x3 area underground. \n\nTotal Capacity: 9 Stacks</description>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="ASF_CellarStone"]/building/maxItemsInCell</xpath>
        <value>
            <maxItemsInCell>12</maxItemsInCell>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="ASF_CellarStone"]/costStuffCount</xpath>
        <value>
            <costStuffCount>75</costStuffCount>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="ASF_CellarStone"]/description</xpath>
        <value>
            <description>A stone cellar stone that can store a range of items. Keeps perishable items slightly cooler underground, effective at around 74F/23C. Items stored inside will never deteriorate and don't affect the beauty of their surroundings. \nOccupies a 3x3 area underground. \n\nTotal Capacity: 175 Stacks</description>
        </value>
    </Operation>
    <!-- Tent -->
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="ASF_StorageTent"]/building/maxItemsInCell</xpath>
        <value>
            <maxItemsInCell>2</maxItemsInCell>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="ASF_StorageTent"]/costStuffCount</xpath>
        <value>
            <costStuffCount>50</costStuffCount>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="ASF_StorageTent"]/description</xpath>
        <value>
        <description>A tent that can store a variety of items. Items stored inside will never deteriorate and don't affect the beauty of their surroundings.\n\nTotal Capacity: 18 Stacks</description>
        </value>
    </Operation>
    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ThingDef[defName="ASF_WeaponRack"]/designationCategory</xpath>
        <value>
            <designationCategory>Ferny_GearStorage</designationCategory>
        </value>
    </Operation>

<!-- Vanilla Furniture Expanded Patches -->
    <!-- Core -->
    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>Vanilla Furniture Expanded</li>
        </mods>
        <match Class="PatchOperationAdd">
            <xpath>Defs/ThingDef[defName="ASF_WeaponRack"]</xpath>
            <value>
                <researchPrerequisites>
                    <li>MF_BasicFurniture</li>
                </researchPrerequisites>
            </value>
        </match>
    </Operation>
    <!-- Art -->
    <Operation Class="PatchOperationFindMod">
        <mods>
            <li>Vanilla Furniture Expanded - Art</li>
        </mods>
        <match Class="PatchOperationSequence">
            <operations>
                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[defName="ASF_CoveredClayPot"]/researchPrerequisites</xpath>
                    <value>
                        <researchPrerequisites>
                            <li>VFE_Res_Pottery</li>
                        </researchPrerequisites>
                    </value>
                </li>
                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[defName="ASF_UncoveredClayPot"]/researchPrerequisites</xpath>
                    <value>
                        <researchPrerequisites>
                            <li>VFE_Res_Pottery</li>
                        </researchPrerequisites>
                    </value>
                </li>
        </match>
    </Operation>

<!-- RESTORE CUT CONTENT -->
    <Operation Class="PatchOperationConditional">
        <xpath>Defs/ThingDef[defName="ASF_StoragePit"]/designationCategory</xpath>
    <!-- Use the "Restore Content" mod to determine if these are brought back
        <match Class="PatchOperationSequence">
            <operations>
                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[defName="ASF_StoragePit"]/designationCategory</xpath>
                    <value>Ferny_GeneralStorage</value>
                </li>
                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[defName="ASF_CellarWood"]/designationCategory</xpath>
                    <value>Ferny_GeneralStorage</value>
                </li>
                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[defName="ASF_CellarStone"]/designationCategory</xpath>
                    <value>Ferny_GeneralStorage</value>
                </li>
                <li Class="PatchOperationReplace">
                    <xpath>Defs/ThingDef[defName="ASF_MeatRack"]/designationCategory</xpath>
                    <value>Ferny_FoodStorage</value>
                </li>
            </operations>
        </match>
        -->
        <nomatch Class="PatchOperationSequence">
            <operations>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="ASF_StoragePit"]</xpath>
                    <value>
                        <designationCategory>Ferny_GeneralStorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="ASF_CellarWood"]</xpath>
                    <value>
                        <designationCategory>Ferny_GeneralStorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="ASF_CellarStone"]</xpath>
                    <value>
                        <designationCategory>Ferny_GeneralStorage</designationCategory>
                    </value>
                </li>
                <li Class="PatchOperationAdd">
                    <xpath>Defs/ThingDef[defName="ASF_MeatRack"]</xpath>
                    <value>
                        <designationCategory>Ferny_FoodStorage</designationCategory>
                    </value>
                </li>
            </operations>
        </nomatch>
    </Operation>
</Patch>